<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AFF Predictor</title>


    <style>
        .form-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5px; /* Adjust gap as needed */
        }

    
        


        /*Style the input button*/
        input[type="submit"] {
        width: 50%; /* Adjust the width as needed */
        padding: 5px; /* Adjust padding as needed */
        }

        
        
    </style>

    
</head>
<body>
    <h1>AFF Machine Learning Predictor</h1>
    <form id="form" class ="form-container">



        <div>
            <label for="fieldRace">Race:</label>
            <select id="fieldRace" name ="fieldRace">
                <option></option>
                <option>White</option>
                <option>Asian</option>
                <option>Black</option>
                <option>Hispanic/Latino</option>

            </select>

        </div>

        <div>
            <label for="fieldAgeAtFirst">Age at first hip fracture (Years): </label>
            <input name="fieldAgeAtFirst" id="fieldAgeAtFirst" />
        </div>

        <div>
            <label for="fieldBisphosphonates">Bisphosphonates: </label>
            <input name="fieldBisphosphonates" id="fieldBisphosphonates" />
        </div>

        <div>
            <label for="fieldDuration">Duration (Years): </label>
            <input name="fieldDuration" id="fieldDuration" />
        </div>

        <div>
            <label for="fieldOtherMedication">Other Medications: </label>
            <input name="fieldOtherMedication" id="fieldOtherMedication" />
        </div>

        <div>
            <label for="fieldWeight">Weight (kg): </label>
            <input name="fieldWeight" id="fieldWeight" />
        </div>

        <div>
            <label for="fieldHeight">Height (cm): </label>
            <input name="fieldHeight" id="fieldHeight" />
        </div>

        <div>
            <label for="fieldBMI">BMI (Kg/m^2): </label>
            <input name="fieldBMI" id="fieldBMI" />
        </div>


        <div>
            <label for="fieldPreviousNTF">Previous Non Traumatic Fracture (Y/N): </label>
            <select id="fieldPreviousNTF" name="fieldPreviousNTF">
                <option></option>
                <option>Y</option>
                <option>N</option>
            </select>
        </div>

        <div>
            <label for="fieldParent">Parent fractured hip? (Y/N): </label>
            <select id="fieldParent" name="fieldParent">
                <option></option>
                <option>Y</option>
                <option>N</option>
            </select>
        </div>

        <div>
            <label for="fieldSmoker">Current Smoker? (Y/N): </label>
            <select id="fieldSmoker" name="fieldSmoker">
                <option></option>
                <option>Y</option>
                <option>N</option>
            </select>
        </div>

        <div>
            <label for="fieldSteroid">Steroid Use (>3 months): (Y/N): </label>
            <select id="fieldSteroid" name="fieldSteroid">
                <option></option>
                <option>Y</option>
                <option>N</option>
            </select>
        </div>

        <div>
            <label for="fieldRA">Rhuematoid Arthritis: (Y/N): </label>
            <select id="fieldRA" name="fieldRA">
                <option></option>
                <option>Y</option>
                <option>N</option>
            </select>
        </div>

        <div>
            <label for="fieldSO">History of Secondary Osteoporosis: (Y/N): </label>
            <select id="fieldSO" name="fieldSO">
                <option></option>
                <option>Y</option>
                <option>N</option>
            </select>
        </div>

        <div>
            <label for="fieldAlcoholism">Alcoholism (>3 drinks per day) (Y/N): </label>
            <select id="fieldAlcoholism" name="fieldAlcoholism">
                <option></option>
                <option>Y</option>
                <option>N</option>
            </select>
        </div>


        <div>
            <label for="fieldMCT">Medial Cortical Thickness (mm): </label>
            <input name="fieldMCT" id="fieldMCT" />
        </div>

        <div>
            <label for="fieldLCT">Lateral Cortical Thickness (mm): </label>
            <input name="fieldLCT" id="fieldLCT" />
        </div>

        <div>
            <label for="fieldOffset">Offset (mm): </label>
            <input name="fieldOffset" id="fieldOffset" />
        </div>

        <div>
            <label for="fieldFMA">Femoral neck angle (Degrees): </label>
            <input name="fieldFMA" id="fieldFMA" />
        </div>

        <div>
            <label for="fieldFMD">Femoral neck diameter (mm): </label>
            <input name="fieldFMD" id="fieldFMD" />
        </div>

        <div>
            <label for="fieldVO">Vertical Offset (mm): </label>
            <input name="fieldVO" id="fieldVO" />
        </div>

        <div>
            <label for="fieldFMT">Fermoral neck thickness (mm): </label>
            <input name="fieldFMT" id="fieldFMT" />
        </div>

        <div>
            <label for="fieldDXABMD">DXA Femoral Neck #1 BMD (g/cm^2): </label>
            <input name="fieldDXABMD" id="fieldDXABMD" />
        </div>

        <div>
            <label for="fieldDXAlumbar">DXA Femoral Neck #1 BMD (g/cm^2): </label>
            <input name="fieldDXAlumbar" id="fieldDXAlumbar" />
        </div>

        <div>
            <label for="fieldDXABMD">DXA L1-L4 BMD (g/cm^2): </label>
            <input name="fieldDXABMD" id="fieldDXABMD" />
        </div>

        <div>
            <label for="fieldFraxMajor">FRAX Score - online calculator major fracture (%): </label>
            <input name="fieldFraxMajor" id="fieldFraxMajor" />
        </div>


        <div>
            <label for="fieldFraxHip">FRAX Score - online calculator hip fracture (%): </label>
            <input name="fieldFraxHip" id="fieldFraxHip" />
        </div>

        <div></div>
        <div></div>
        <div></div>


        <input type="submit" value="Submit">
    </form>

    <script>
        document.getElementById("form").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent the form from submitting normally
            
            // Get form data
            var formData = new FormData(this);


            //validate numbers being inputted correctly.
            //var ageInput = formData.get("fieldAgeAtFirst");
            //if (ageInput === "" || isNaN(ageInput)) {
            //    alert("Please input a valid age as a number.");
            //    return; // Exit function if input is invalid
            //}

            //var durationInput = formData.get("fieldDuration");
            //if (durationInput === "" || isNaN(durationInput)) {
            //    alert("Please input a valid duration as a number.");
            //    return; // Exit function if input is invalid
            //}

            // Send form data to FastAPI endpoint
            fetch('https://affpythonrepo.onrender.com', {
            //fetch('http://127.0.0.1:8000/submit/', {

                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(Object.fromEntries(formData.entries()))
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);
                alert('Prediction Results:\n' + data.message);
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again later.');
            });
        });
    </script>
</body>
</html>
